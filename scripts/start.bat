@echo off
title ะะฐะฟััะบ Discord Shop Bot
echo ๐ ะะฐะฟััะบ Discord Shop Bot...

REM ะะตัะตัะพะด ะฒ ะบะพัะฝะตะฒัั ะดะธัะตะบัะพัะธั
cd /d "%~dp0.."

REM ะัะพะฒะตัะบะฐ ัััะตััะฒะพะฒะฐะฝะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
if not exist "venv" (
    echo ๐ฆ ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั...
    python -m venv venv
)

REM ะะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
echo ๐ง ะะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั...
call venv\Scripts\activate.bat

REM ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
echo ๐ฅ ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน...
pip install -r requirements.txt

REM ะัะพะฒะตัะบะฐ ัััะตััะฒะพะฒะฐะฝะธั .env ัะฐะนะปะฐ
if not exist ".env" (
    echo โ๏ธ  ะคะฐะนะป .env ะฝะต ะฝะฐะนะดะตะฝ! ะกะบะพะฟะธััะนัะต .env.example ะฒ .env ะธ ะฝะฐัััะพะนัะต ะตะณะพ.
    pause
    exit /b 1
)

REM ะกะพะทะดะฐะฝะธะต ะฝะตะพะฑัะพะดะธะผัั ะดะธัะตะบัะพัะธะน
if not exist "logs" (
    echo ๐ ะกะพะทะดะฐะฝะธะต ะฟะฐะฟะบะธ logs...
    mkdir logs
)

if not exist "data" (
    echo ๐ ะกะพะทะดะฐะฝะธะต ะฟะฐะฟะบะธ data...
    mkdir data
)

if not exist "data\exchanges" (
    echo ๐ ะกะพะทะดะฐะฝะธะต ะฟะฐะฟะบะธ exchanges...
    mkdir data\exchanges
)

REM ะะฐะฟััะบ ะฑะพัะฐ ะฒ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต
echo ๐ค ะะฐะฟััะบ ะฑะพัะฐ ะฒ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต...
echo ๐ ะัะต ะปะพะณะธ ัะพััะฐะฝััััั ะฒ logs/bot.log
echo.

REM ะะฐะฟััะบ ะฑะพัะฐ ั ะฟะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะตะผ ะฒัะฒะพะดะฐ ะฒ ะปะพะณ ัะฐะนะป
start /MIN python bot.py > logs/bot.log 2>&1

REM ะะถะธะดะฐะฝะธะต ะธะฝะธัะธะฐะปะธะทะฐัะธะธ ะฑะพัะฐ
timeout /t 3 /nobreak >nul

echo โ ะะพั ะทะฐะฟััะตะฝ ะฒ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต!
echo ๐ ะัะพะฒะตัััะต logs/bot.log ะดะปั ะฟะพะดัะพะฑะฝะพะณะพ ะฒัะฒะพะดะฐ
echo ๐ ะะปั ะพััะฐะฝะพะฒะบะธ ะฑะพัะฐ ะทะฐะบัะพะนัะต python.exe ะฒ ะะธัะฟะตััะตัะต ะทะฐะดะฐั
echo.
pause
